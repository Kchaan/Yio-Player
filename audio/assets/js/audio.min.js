$(document).ready(function(){function V(){if(audioPlayer.width)if(d.width()<=parseFloat(audioPlayer.width))l.css("width","100%");else{var a=audioPlayer.width;l.css("width",a)}else d.width()<=450?l.css("width","100%"):l.css("width","450px");var b=parseFloat(l.width()),c=parseFloat(d.width());c<b?f.css("overflow-x","auto"):f.css("overflow-x","hidden")}function Y(a){var c=q,d=b.duration;k.text(da(b.currentTime));var e=a-c.offset().left,f=100*e/c.width();f>100&&(f=100),f<0&&(f=0),h.css("width",f+"%"),b.currentTime=d*f/100}function Z(){b.paused||b.ended?(_(),ga()):(aa(),ha())}function _(){g.attr("src",audioPlayer.assets_url+"images/pause_dark.png"),b.play(),F=b.volume,clearInterval(C),C=setInterval(ba,40)}function aa(){g.attr("src",audioPlayer.assets_url+"images/play_dark.png"),b.pause(),clearInterval(C)}function ba(){var a=b.currentTime,c=b.duration,d=100*a/c;d>100&&(d=100),h.css("width",d+"%"),m.text(da(c)),k.text(da(a))}function ca(a){var c=b.duration,d=a-q.offset().left,e=100*d/q.width();p.css("width",e+"%");var g,f=e/100*c;g=da(f>0?f<=c?f:c:0),o.html(g);var h=d-o.outerWidth()/2;o.css("left",h),o.fadeIn(0)}function da(a){var b=Math.floor(a/60)<10?"0"+Math.floor(a/60):Math.floor(a/60),c=Math.floor(a-60*b)<10?"0"+Math.floor(a-60*b):Math.floor(a-60*b);return b+":"+c}function ea(){var a=m.width(),b=parseInt(l.width()),c=a;c=Math.round(parseFloat(c));var d=248+2*c+20,e=b-d;n.css("width",e)}function fa(){b.readyState>0&&(D=!0,E=b.duration,m.text(da(E)),clearInterval(U),ea())}function ga(){$(".audio-playing1").fadeIn(),$(".audio-playing2").fadeOut()}function ha(){$(".audio-playing1").fadeOut(),$(".audio-playing2").fadeIn()}function ia(a){a&&!I&&_()}function ja(a){var b,c;switch(a){case"blue":b="#1976D2",c="#2196F3";break;case"red":b="#DE0E0E",c="#e92419";break;case"green":b="#07a100",c="#4CAF50";break;case"yellow":b="#cacf00",c="#d7dc29";break;case"pink":b="#C2185B",c="#E91E63";break;case"purple":b="#7B1FA2",c="#9C27B0";break;case"brown":b="#77321b",c="#89462e";break;case"grey":b="#455A64",c="#607D8B";break;case"black":b="#111111",c="#333333"}a&&"default"!=a&&"none"!=a&&"orange"!=a&&"null"!=a&&(w.add(h).add(i).add(v).add(s).css("background",b),p.add(o).css("background",c))}function ka(c){var d=$(".audio-playlist-item");d.removeClass("audio-playlist-item-active"),d.find("img").attr("src",audioPlayer.assets_url+"images/play_white.png"),c.addClass("audio-playlist-item-active");var e=c.find(".audio-playlist-title").text();j.text(e);var f=audioPlayer.assets_url+"images/music2.png";c.find("img").attr("src",f);var g=parseInt(c.find(".audio-playlist-id").text()),h=playlist[g].source,i=playlist[g].source.split("/");i=i[i.length-1].split(".")[1],a.find("source").first().attr("src",h).attr("type","audio/"+i),b.load(),_()}function pa(){if(la&&la>1){var c=$(".audio-playlist-item-active"),d=parseInt(c.find(".audio-playlist-id").text()),e=d;e--;var f=!1;e<1&&(e=la,c=$(".audio-playlist-item").last(),f=!0),srcPrev=playlist[e].source;var g=playlist[e].source.split("/");g=g[g.length-1].split(".")[1],a.find("source").first().attr("src",srcPrev).attr("type","audio/"+g);var h=$(".audio-playlist-item");if(h.removeClass("audio-playlist-item-active"),h.find("img").attr("src",audioPlayer.assets_url+"images/play_white.png"),f){c.addClass("audio-playlist-item-active"),c.find("img").attr("src",audioPlayer.assets_url+"images/music2.png"),j.text(c.find(".audio-playlist-title").text()),b.load(),_(),3===N&&aa(),X(1,F);var i=$(".audio-playlist-item").length,k=A.height()*(i/4);A.animate({scrollTop:k},300)}else c.prev().addClass("audio-playlist-item-active"),c.prev().find("img").attr("src",audioPlayer.assets_url+"images/music2.png"),j.text(c.prev().find(".audio-playlist-title").text()),b.load(),_(),X(1,F)}}function qa(){if(la&&la>1){var c=$(".audio-playlist-item-active"),d=parseInt(c.find(".audio-playlist-id").text()),e=d;e++;var f=!1;e>la&&(e=1,c=$(".audio-playlist-item").first(),f=!0),srcNext=playlist[e].source;var g=playlist[e].source.split("/");g=g[g.length-1].split(".")[1],a.find("source").first().attr("src",srcNext).attr("type","audio/"+g);var h=$(".audio-playlist-item");h.removeClass("audio-playlist-item-active"),h.find("img").attr("src",audioPlayer.assets_url+"images/play_white.png"),f?(c.addClass("audio-playlist-item-active"),c.find("img").attr("src",audioPlayer.assets_url+"images/music2.png"),j.text(c.find(".audio-playlist-title").text()),b.load(),_(),3===N&&aa(),X(1,F),A.animate({scrollTop:0},300)):(c.next().addClass("audio-playlist-item-active"),c.next().find("img").attr("src",audioPlayer.assets_url+"images/music2.png"),j.text(c.next().find(".audio-playlist-title").text()),b.load(),_(),X(1,F))}}var C,D,E,F,G,a=$("#myAudio"),b=a[0],c=$(document),d=$(window),e=!1,f=$("body,html"),g=$(".audio-btn-play"),h=$(".audio-timeBar"),i=$(".audio-timeMax"),j=$(".audio-caption"),k=$(".audio-current"),l=$(".audio-player"),m=$(".audio-duration"),n=$(".audio-progressClick"),o=$("#audio-showed_time"),p=$(".audio-showBar"),q=$(".audio-progress"),r=$(".audio-volumeBar_bg"),s=$(".audio-volumeBar"),t=$(".audio-btn-sound"),u=$(".audio-volumeBg,.audio-volumeBar_bg"),v=$(".audio-volumeMax"),w=$(".audio-panel"),x=$(".audio-playing"),y=$(".audio-loop-div"),z=$(".audio-cover"),A=$(".audio-playlist"),B=z.find("img"),H=!1,I=!1,J=!1,K=!1,M=0,N=1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(J=!0);if(audioPlayer.cover_height&&audioPlayer.cover_url&&z.css("height",audioPlayer.cover_height),audioPlayer.assets_url||(audioPlayer.assets_url="/"),audioPlayer.width){var P=parseFloat(audioPlayer.width);l.css("width",P)}if(audioPlayer.cover_url?"default"==audioPlayer.cover_url?B.attr("src",audioPlayer.assets_url+"images/cover.png"):B.attr("src",audioPlayer.cover_url):z.remove(),playlist[1].title){j.html(playlist[1].title);var Q=j.outerHeight()+l.outerHeight();l.css("height",Q+z.outerHeight()),w.css("height",Q),audioPlayer.cover_url&&w.css("top",z.outerHeight());var R=parseFloat(w.outerHeight());70==R?x.css({top:"5px"}):x.css("top",(R-55)/2)}else{j.css("padding",0);var S=j.outerHeight()+l.outerHeight();l.css("height",S+z.outerHeight()),w.css("height",S),audioPlayer.cover_url&&w.css("top",z.outerHeight()),x.css({top:-10})}if(playlist[1].source){var T=playlist[1].source.split(".");T=T[T.length-1],"mp3"==T&&(T="mpeg"),T="audio/"+T,a.append("<source src="+playlist[1].source+" type="+T+" />")}else j.remove();var U=setInterval(fa,50);g.on("click",function(){Z()}),V(),d.add(l).resize(function(){V(),ea()}),a.on("ended",function(){2===N?(ia(!0),X(1,F)):1===N||3===N?I||qa():(aa(),ha(),clearInterval(C))}),c.on("mouseup",function(a){K&&!J&&(K=!1,X(a.pageX)),3!=a.which&&I&&(I=!1,Y(a.pageX),b.ended&&2===N&&ia(!0))}).on("mousemove",function(a){b.ended&&(2===N&&ia(!0),1!==N&&3!==N||I||qa()),a.preventDefault(),K&&!J&&X(a.pageX),3!=a.which&&I&&Y(a.pageX)});n.bind("mousedown",function(a){3!=a.which&&(I=!0,Y(a.pageX))}).bind("touchstart",function(a){a.preventDefault(),I=!0,Y(event.touches[0].pageX)}).bind("touchend",function(a){a.preventDefault(),I&&(I=!1,Y(event.touches[0].pageX))}).bind("touchmove",function(a){a.preventDefault(),I&&Y(event.touches[0].pageX)}),u.bind("mousedown",function(a){3!=a.which&&(K=!0,X(a.pageX))}).bind("touchstart",function(a){a.preventDefault(),K=!0,X(event.touches[0].pageX)}).bind("touchend",function(a){a.preventDefault(),K&&(K=!1,X(event.touches[0].pageX))}).bind("touchmove",function(a){a.preventDefault(),K&&X(event.touches[0].pageX)}),t.on("click touchstart",function(a){if(!J){a.preventDefault();var c=b.volume,d=$(this);d.attr("src");0==c?(M?X(0,M):X(0,1),M=0):(M=c,X(0,0));var f;f=Math.round(100*b.volume),s.css("width",f+"%")}}),u.on("mousedown",function(a){K=!0,b.muted=!1,t.removeClass("muted"),X(a.pageX)}).bind("touchstart",function(a){a.preventDefault(),K=!0,b.muted=!1,t.removeClass("muted"),X(event.touches[0].pageX)}),n.on("mousemove",function(a){H||ca(a.pageX)}).on("mouseleave",function(){o.fadeOut(0),p.css({width:0})}),o.on("mouseenter",function(){H=!0,o.fadeOut(0)}).on("mouseleave",function(){H=!1});var X=function(a,c){var d;if(F=b.volume,c||0===c)d=100*c;else{var e=a-r.offset().left;d=100*e/r.width()}d>100&&(d=100),d<0&&(d=0),s.css("width",d+"%"),b.volume=d/100,0==b.volume?t.attr("src",audioPlayer.assets_url+"images/muted_dark.png"):b.volume>0&&b.volume<.5?t.attr("src",audioPlayer.assets_url+"images/volume1_dark.png"):t.attr("src",audioPlayer.assets_url+"images/volume2_dark.png")};y.on("click",function(){N++,N>3&&(N=1),1===N?y.find("img").attr("src",audioPlayer.assets_url+"images/replay_all.png"):2===N?(y.find("img").attr("src",audioPlayer.assets_url+"images/replay_one.png"),I||(ia(),b.ended&&ga())):3===N&&y.find("img").attr("src",audioPlayer.assets_url+"images/replay_all_one.png")}),d.on("keyup",function(a){var c=a.which;80===c||75===c||32===c?Z():37===c||74===c?G?pa():(b.currentTime-=10,ba()):38===c?G&&pa():39===c||76===c?G?qa():(b.currentTime+=10,ba()):40===c?G&&qa():109===c||40===c?e&&!G&&(a.preventDefault(),X(0,b.volume-.1),ba()):107===c||38===c?e&&!G&&(a.preventDefault(),X(0,b.volume+.1),ba()):35===c?(a.preventDefault(),qa()):34===c&&pa()}),l.on("mouseenter",function(){e=!0}).on("mouseleave",function(){e=!1}),audioPlayer.color&&ja(audioPlayer.color),Object.size=function(a){var c,b=0;for(c in a)a.hasOwnProperty(c)&&b++;return b};var la;if(playlist&&(la=Object.size(playlist),la&&la>1)){for(var ma=1;ma<la+1;){var na=playlist[ma];$(".audio-playlist").append("<span class='audio-playlist-item'><span><img src='assets/images/play_white.png' draggable='false' /></span><span class='audio-playlist-title'>"+na.title+"</span><span class='audio-playlist-id'>"+ma+"</span></span>"),ma++}var oa=$(".audio-playlist-item");oa.first().addClass("audio-playlist-item-active"),oa.first().find("img").attr("src",audioPlayer.assets_url+"images/music2.png"),oa.on("click",function(){ka($(this))})}A.on("mouseenter",function(){G=!0}).on("mouseleave",function(){G=!1})});